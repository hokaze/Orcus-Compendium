<!DOCTYPE html>
<html>
  <head>
    <title>Orcus Compendium</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="data/markdown-to-html/github-markdown-light.css">
    <link rel="icon" href="favicon.ico">
    
    <style>
      /* markdown css for modal dialogue on markdown-to-html files */

      .markdown-body {
          box-sizing: border-box;
          min-width: 200px;
          max-width: 980px;
          margin: 0 auto;
          padding: 45px;
      }

      @media (max-width: 767px) {
          .markdown-body {
              padding: 15px;
          }
      }
    </style>
  </head>
  
  <body>
    <h2>Orcus Compendium</h2>
    <p>Proof of Concept - searchable filters/tables of class, ancestry, power, kit, arts</p>
    <p>Options marked with a "*" are Advanced Options that do not appear in the Core Orcus Heroes' Handbook yet</p>

    <div class="tab">
      <button id ="classTab" class="tablinks" onclick="selectTab(event, 'Classes')">Classes</button>
      <button id ="powerTab" class="tablinks" onclick="selectTab(event, 'Powers')">Powers</button>
      <button id ="cruxTab" class="tablinks" onclick="selectTab(event, 'Cruxes')">Ancestries (Cruxes)</button>
      <button id ="heritageTab" class="tablinks" onclick="selectTab(event, 'Heritages')">Ancestries (Heritages)</button>
      <button id ="speciesTab" class="tablinks" onclick="selectTab(event, 'Species')">Ancestries (Species) *</button>
      <button class="tablinks" onclick="selectTab(event, 'Kits')">Kits</button>
      <button class="tablinks" onclick="selectTab(event, 'Arts')">Arts *</button>
    </div>

    <!-- Class table search -->
    <div id="Classes" class="tabcontent">
    
      <!-- datalists to allow dropdown options in search, populated at same time table is -->
      <datalist id="dlClassName"></datalist>
      <datalist id="dlClassTradition"></datalist>
      <datalist id="dlClassRole"></datalist>
      <datalist id="dlClassKeyAbility"></datalist>
      <datalist id="dlClassDisciplines"></datalist>
    
      <table id="classTable" class="filterTable">
        <!-- searchable headers, note that you can't currently filter by multiple inputs, only the last search applies -->
        <tr class="header">
          <th>
            <input type="search" id="searchClassName" oninput="searchClassTable('searchClassName',0)" placeholder="Name" title="Search by Class Name" list="dlClassName">
            <button onclick="sortTableByColumn('classTable','0')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchClassTradition" oninput="searchClassTable('searchClassTradition',1)" placeholder="Tradition" title="Search by Tradition" list="dlClassTradition">
            <button onclick="sortTableByColumn('classTable','1')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchClassRole" oninput="searchClassTable('searchClassRole',2)" placeholder="Role" title="Search by Role" list="dlClassRole">
            <button onclick="sortTableByColumn('classTable','2')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchClassKeyAbility" oninput="searchClassTable('searchClassKeyAbility',3)" placeholder="Key Ability" title="Search by Key Ability"  list="dlClassKeyAbility">
            <button onclick="sortTableByColumn('classTable','3')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchClassDisciplines" oninput="searchClassTable('searchClassDisciplines',4)" placeholder="Class Disciplines" title="Search by Class Disciplines" list="dlClassDisciplines">
            <button onclick="sortTableByColumn('classTable','4')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- Powers -->
    <div id="Powers" class="tabcontent">
      <table id="powerTable" class="filterTable">
        <!-- searchable headers, note that you can't currently filter by multiple inputs, only the last search applies -->
        <tr class="header">
          <th>
            <input type="search" id="searchPowerName" oninput="searchPowerTable('searchPowerName',0)" placeholder="Name" title="Search by Power Name">
            
            <!-- Disabled sorting as sorting when showing ALL results causes page to hang -->
            <!--<button onclick="sortTableByColumn('powerTable','0')">Sort</button>-->
          </th>
          <th>
            <input type="search" id="searchPowerSource" oninput="searchPowerTable('searchPowerSource',1)" placeholder="Source" title="Search by Source">
            <!--<button onclick="sortTableByColumn('powerTable','1')">Sort</button>-->
          </th>
          <th>
            <input type="search" id="searchPowerList" oninput="searchPowerTable('searchPowerList',2)" placeholder="List" title="Search by List">
            <!-- <button onclick="sortTableByColumn('powerTable','2')">Sort</button> -->
          </th>
          <th>
            <input type="search" id="searchPowerCategory" oninput="searchPowerTable('searchPowerCategory',3)" placeholder="Category" title="Search by Category">
            <!-- <button onclick="sortTableByColumn('powerTable','3')">Sort</button> -->
          </th>
          <th>
            <input type="search" id="searchPowerFrequency" oninput="searchPowerTable('searchPowerFrequency',4)" placeholder="Frequency" title="Search by Frequency">
            <!-- <button onclick="sortTableByColumn('powerTable','4')">Sort</button> -->
          </th>
          <th>
            <input type="search" id="searchPowerTier" oninput="searchPowerTable('searchPowerTier',5)" placeholder="Tier" title="Search by Tier">
            <!-- <button onclick="sortTableByColumn('powerTable','5')">Sort</button> -->
          </th>
          <th>
            <input type="search" id="searchPowerTags" oninput="searchPowerTable('searchPowerTags',6)" placeholder="Tags" title="Search by Tags">
            <!-- <button onclick="sortTableByColumn('powerTable','6')">Sort</button> -->
          </th>
        </tr>
      </table>
    </div>

    <!-- Ancestries (Cruxes) -->
    <div id="Cruxes" class="tabcontent">
      <p>
        Cruxes and Heritages are the Core option for Ancestries. For games where Species matters more than upbringing, use Ancestries (Species) instead.
      </p>
      <p>
        You are human, or otherwise defined more by upbringing than genetics:<br/>
        <strong>Size:</strong> Your size is Medium.<br/>
        <strong>Ability Scores:</strong> +2 to two ability scores of your choice.<br/>
        <strong>Speed:</strong> Your base walking speed is 6 squares.<br/>
        <strong>Languages:</strong> You can speak, read, and write Common and one extra language of your choice.<br/>
      </p>
      <p>
        In addition to the above statistics, pick a <strong>Crux</strong> (below) and a Heritage
      </p>
      
      <table id="cruxTable" class="filterTable">
        <tr class="header">
          <th>
            <input type="search" id="searchCruxName" oninput="searchCruxTable('searchCruxName',0)" placeholder="Name" title="Search by Crux Name">
            <button onclick="sortTableByColumn('cruxTable','0')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchCruxSkill" oninput="searchCruxTable('searchCruxSkill',1)" placeholder="Skill" title="Search by Skill">
            <button onclick="sortTableByColumn('cruxTable','1')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchCruxFeat1" oninput="searchCruxTable('searchCruxFeat1',2)" placeholder="Feature 1 Name" title="Search by Feature 1">
            <button onclick="sortTableByColumn('cruxTable','2')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchCruxFeat2" oninput="searchCruxTable('searchCruxFeat2',3)" placeholder="Feature 2 Name" title="Search by Feature 2">
            <button onclick="sortTableByColumn('cruxTable','3')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchCruxPower" oninput="searchCruxTable('searchCruxPower',4)" placeholder="Power" title="Search by Power">
            <button onclick="sortTableByColumn('cruxTable','4')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- Ancestries (Heritages) -->
    <div id="Heritages" class="tabcontent">
      <p>
        Cruxes and Heritages are the Core option for Ancestries. For games where Species matters more than upbringing, use Ancestries (Species) instead.
      </p>
      <p>
        You are human, or otherwise defined more by upbringing than genetics:<br/>
        <strong>Size:</strong> Your size is Medium.<br/>
        <strong>Ability Scores:</strong> +2 to two ability scores of your choice.<br/>
        <strong>Speed:</strong> Your base walking speed is 6 squares.<br/>
        <strong>Languages:</strong> You can speak, read, and write Common and one extra language of your choice.<br/>
      </p>
      <p>
        In addition to the above statistics, pick a Crux and a <strong>Heritage</strong> (below)
      </p>
      
      <table id="heritageTable" class="filterTable">
        <tr class="header">
          <th>
            <input type="search" id="searchHeritageName" oninput="searchHeritageTable('searchHeritageName',0)" placeholder="Name" title="Search by Heritage Name">
            <button onclick="sortTableByColumn('HeritageTable','0')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchHeritageSkill" oninput="searchHeritageTable('searchHeritageSkill',1)" placeholder="Skill Bonus" title="Search by Skill">
            <button onclick="sortTableByColumn('HeritageTable','1')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchHeritageFeatName" oninput="searchHeritageTable('searchHeritageFeatName',2)" placeholder="Feature Name" title="Search by Feature Name">
            <button onclick="sortTableByColumn('HeritageTable','2')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchHeritageFeatDesc" oninput="searchHeritageTable('searchHeritageFeatDesc',3)" placeholder="Feature Description" title="Search by Feature Description">
            <button onclick="sortTableByColumn('HeritageTable','3')">Sort</button>
          </th>
        </tr>
      </table>
    </div>

    <!-- Advanced Ancestries Option: Species -->
    <div id="Species" class="tabcontent">
      <p>
        * If using this Advanced Option, you pick a Species as your Ancestory instead of your normal Crux and Heritage.
      </p>
      
      <table id="speciesTable" class="filterTable">
        <!-- searchable headers, note that you can't currently filter by multiple inputs, only the last search applies -->
        <tr class="header">
          <th>
            <input type="search" id="searchSpeciesName" oninput="searchSpeciesTable('searchSpeciesName',0)" placeholder="Name" title="Search by Species Name">
            <button onclick="sortTableByColumn('speciesTable','0')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchSpeciesDescription" oninput="searchSpeciesTable('searchSpeciesDescription',1)" placeholder="Description" title="Search by Description/Orgin">
            <button onclick="sortTableByColumn('speciesTable','1')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchSpeciesAbility1" oninput="searchSpeciesTable('searchSpeciesAbility1',2)" placeholder="Ability 1" title="Search by Ability 1">
            <button onclick="sortTableByColumn('speciesTable','2')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchSpeciesAbility2" oninput="searchSpeciesTable('searchSpeciesAbility2',3)" placeholder="Ability 2" title="Search by Ability 2">
            <button onclick="sortTableByColumn('speciesTable','3')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchSpeciesSpeed" oninput="searchSpeciesTable('searchSpeciesSpeed',4)" placeholder="Speed" title="Search by Speed">
            <button onclick="sortTableByColumn('speciesTable','4')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchSpeciesDarkvision" oninput="searchSpeciesTable('searchSpeciesDarkvision',5)" placeholder="Darkvision" title="Search by Darkvision">
            <button onclick="sortTableByColumn('speciesTable','5')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- Kits -->
    <div id="Kits" class="tabcontent">
      <p>
        Kits can be taken as further customisation option by giving up your Tier 1 feats (levels 1, 2, 4, 6, 8 and 10).
        <br/>
        Some GMs may grant players a kit for free without the feat cost, or not allow kits at all.
      </p>
      <p>
        "Dabbles in [X]" kits are a way to multiclass, while "Worships the [X]" represent divine domains and others represent additional options like familiars, shapeshifting, animal companions, poisons, etc.
      </p>
      <p>
        Some classes may grant access to kits automatically (such as Priests choosing a "Worships the [X]" style kit. These kits do not require the sacrifice of your feats.
      </p>
      
      <table id="kitTable" class="filterTable">
        <tr class="header">
          <th>
            <input type="search" id="searchKitName" oninput="searchKitTable('searchKitName',0)" placeholder="Name" title="Search by Kit Name">
            <button onclick="sortTableByColumn('kitTable','0')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchKitDescription" oninput="searchKitTable('searchKitDescription',1)" placeholder="Description" title="Search by Description">
            <button onclick="sortTableByColumn('kitTable','1')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchKitRequirements" oninput="searchKitTable('searchKitFeat1',2)" placeholder="Requirements" title="Search by Requirements">
            <button onclick="sortTableByColumn('kitTable','2')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchKitFeat1" oninput="searchKitTable('searchKitFeat1',3)" placeholder="Lv 1 Feature" title="Search by Lv 1 Feature">
            <button onclick="sortTableByColumn('kitTable','3')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchKitFeat5" oninput="searchKitTable('searchKitFeat5',4)" placeholder="Lv 5 Feature" title="Search by Lv 5 Feature">
            <button onclick="sortTableByColumn('kitTable','4')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchKitFeat10" oninput="searchKitTable('searchKitFeat10',5)" placeholder="Lv 10 Feature" title="Search by Lv 10 Feature">
            <button onclick="sortTableByColumn('kitTable','5')">Sort</button>
          </th>
          <th>
            <input type="search" id="searchKitDiscipline" oninput="searchKitTable('searchKitDiscipline',6)" placeholder="Associated Discipline" title="Search by Associated Discipline">
            <button onclick="sortTableByColumn('kitTable','6')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- Advanced Option: Arts - Incantations and Practices -->
    <div id="Arts" class="tabcontent">
      <p>* In a game with the Arts Advanced Option, you have access to non-combat arts in the form of magical <i>Incantations</i> and non-magical <i>Practices</i>.</p>
      <p>If running with the Gated Arts variant, you'll need either the <i>Incantation Caster</i> or <i>Practical Arts</i> feat to learn the relevant category of Arts.</p>
      
      <table id="artTable" class="filterTable">
        <!-- searchable headers, note that you can't currently filter by multiple inputs, only the last search applies -->
        <tr class="header">
          <th>
            <input type="text" id="searchArtName" oninput="searchArtTable('searchArtName',0)" placeholder="Name" title="Search by Art Name">
            <button onclick="sortTableByColumn('artTable','0')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtLevel" oninput="searchArtTable('searchArtLevel',1)" placeholder="Level" title="Search by Level">
            <button onclick="sortTableByColumn('artTable','1')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtType" oninput="searchArtTable('searchArtType',2)" placeholder="Type" title="Search by Type">
            <button onclick="sortTableByColumn('artTable','2')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtCategory" oninput="searchArtTable('searchArtCategory',3)" placeholder="Category" title="Search by Category">
            <button onclick="sortTableByColumn('artTable','3')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtSkill" oninput="searchArtTable('searchArtSkill',4)" placeholder="Skill" title="Search by Skill">
            <button onclick="sortTableByColumn('artTable','4')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtTime" oninput="searchArtTable('searchArtTime',5)" placeholder="Completion Time" title="Search by Skill">
            <button onclick="sortTableByColumn('artTable','5')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- Modal popup for displaying more info on classes, powers, etc -->
    <div id="modalShowInfo" class="modal">
      <div class="modal-content markdown-body">
        <span class="close" onclick="hideModal()">&times;</span>
        <div id="showInfoContent" class="markdown-body"></div>
      </div>
    </div>
    
    <!-- scripts needed to load table data, modal showinfo functionality, searching, sorting, etc - currently all basic js, no library dependencies -->
    <script src="js/misc.js"></script>
    <script src="js/classes.js"></script>
    <script src="js/powers.js"></script>
    <script src="js/cruxes.js"></script>
    <script src="js/heritages.js"></script>
    <script src="js/ancestries.js"></script>
    <script src="js/arts.js"></script>
    <script src="js/kits.js"></script>

    <br/><br/>
    <footer>
      <p><i>Version 0.03 (2023-03-12) - early alpha, aiming for compatibility with Orcus Heroes' Handbook v1.0</i></p>
      <br/><br/>
      <p>
        <strong>Known Issues </strong>
        <br/>
        - no option to filter by non-core options (with exception of Species and Arts we ignore non-core material currently)
        <br/>
        - sorting can only toggle between alphabetical ascending and descending, it cannot revert to initial ordering (or sort numerically, resulting in things like levels going 1, 10, 13, 15, 17, 2, 20, 3, 4, etc)
        <br/>
        - Species has no option to show more details (and should probably show html converted from the Advanced Options markdown) in the same way we show cruxes and classes
        <br/>
        - sorting is disabled on Powers tab to avoid horrible performance hit
        <br/>
        - searching on Powers also lags horribly at times, especially on initial search or clearing a search box, probably need to rework Powers tab to NOT load all powers at once and maybe paginate the tables?
        <br/>
        - nearly non-existent error handling
        <br/>
        - formatting is awful (footer doesn't go to bottom of page properly, columns can become squished, species darkvision should display Yes/No, not empty/1)
        <br/>
        - pretty much everything is still very messy despite some
        refactoring before committing to repo (I don't really write html, js or css; this is all being made up as I go)
        <br/>
        - cannot run locally like 4e Offline Compendium due to browser security protections avoiding the loading of json files from local filesystem
        <br/>
        - some elements of Orcus still need manual intervention to update (e.g. no automation of xslx to csv, some data like cruxes and kits had to be hand-entered due to lack of xslx, need to check diffs on Orcus markdown to see when they've changed)
        <br/>
        - no way to easily jump from disciplines listed on class tab to searching for just that discipline on power (the Class Disciplines should act as a link that autofills a search)
        <br/>
        - dropdown suggestions on what to search only added to Classes for now
        <br/>
        - the "Eats Monster Hearts" kit has no name for the Lv 5 and Lv 10 features (this is a problem with the Orcus core book, I can't provide a name that doesn't exist)
      </p>
    </footer>
  </body>
</html>