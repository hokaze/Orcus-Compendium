<!DOCTYPE html>
<html>
  <head>
    <title>Orcus Compendium</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="data/markdown-to-html/github-markdown-light.css">
    
    <style>
      /* markdown css for modal dialogue on markdown-to-html files */

      .markdown-body {
          box-sizing: border-box;
          min-width: 200px;
          max-width: 980px;
          margin: 0 auto;
          padding: 45px;
      }

      @media (max-width: 767px) {
          .markdown-body {
              padding: 15px;
          }
      }
    </style>
  </head>
  
  <body>
    <h2>Orcus Compendium</h2>
    <p>Proof of Concept - searchable filters/tables of class, ancestry, power</p>
    <p>Options marked with a "*" are Advanced Options that do not appear in the Core Orcus Heroes' Handbook yet</p>

    <div class="tab">
      <button id ="classTab" class="tablinks" onclick="selectTab(event, 'Classes')">Classes</button>
      <button id ="powerTab" class="tablinks" onclick="selectTab(event, 'Powers')">Powers</button>
      <button id ="cruxTab" class="tablinks" onclick="selectTab(event, 'Cruxes')">Ancestries (Cruxes)</button>
      <button id ="heritageTab" class="tablinks" onclick="selectTab(event, 'Heritages')">Ancestries (Heritages)</button>
      <button id ="speciesTab" class="tablinks" onclick="selectTab(event, 'Species')">Ancestries (Species) *</button>
      <button class="tablinks" onclick="selectTab(event, 'Kits')">Kits</button>
      <button class="tablinks" onclick="selectTab(event, 'Arts')">Arts *</button>
    </div>

    <!-- Class table search -->
    <div id="Classes" class="tabcontent">
      <table id="classTable" class="filterTable">
        <!-- searchable headers, note that you can't currently filter by multiple inputs, only the last search applies -->
        <tr class="header">
          <th>
            <input type="text" id="searchClassName" onkeyup="searchClassTable('searchClassName',0)" placeholder="Name" title="Search by Class Name">
            <button onclick="sortTableByColumn('classTable','0')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchClassTradition" onkeyup="searchClassTable('searchClassTradition',1)" placeholder="Tradition" title="Search by Tradition">
            <button onclick="sortTableByColumn('classTable','1')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchClassRole" onkeyup="searchClassTable('searchClassRole',2)" placeholder="Role" title="Search by Role">
            <button onclick="sortTableByColumn('classTable','2')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchClassKeyAbility" onkeyup="searchClassTable('searchClassKeyAbility',3)" placeholder="Key Ability" title="Search by Key Ability">
            <button onclick="sortTableByColumn('classTable','3')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchClassDisciplines" onkeyup="searchClassTable('searchClassDisciplines',4)" placeholder="Class Disciplines" title="Search by Class Disciplines">
            <button onclick="sortTableByColumn('classTable','4')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- Powers -->
    <div id="Powers" class="tabcontent">
      <table id="powerTable" class="filterTable">
        <!-- searchable headers, note that you can't currently filter by multiple inputs, only the last search applies -->
        <tr class="header">
          <th>
            <input type="text" id="searchPowerName" onkeyup="searchPowerTable('searchPowerName',0)" placeholder="Name" title="Search by Power Name">
            
            <!-- Disabled sorting as sorting when showing ALL results causes page to hang -->
            <!--<button onclick="sortTableByColumn('powerTable','0')">Sort</button>-->
          </th>
          <th>
            <input type="text" id="searchPowerSource" onkeyup="searchPowerTable('searchPowerSource',1)" placeholder="Source" title="Search by Source">
            <!--<button onclick="sortTableByColumn('powerTable','1')">Sort</button>-->
          </th>
          <th>
            <input type="text" id="searchPowerList" onkeyup="searchPowerTable('searchPowerList',2)" placeholder="List" title="Search by List">
            <!-- <button onclick="sortTableByColumn('powerTable','2')">Sort</button> -->
          </th>
          <th>
            <input type="text" id="searchPowerCategory" onkeyup="searchPowerTable('searchPowerCategory',3)" placeholder="Category" title="Search by Category">
            <!-- <button onclick="sortTableByColumn('powerTable','3')">Sort</button> -->
          </th>
          <th>
            <input type="text" id="searchPowerFrequency" onkeyup="searchPowerTable('searchPowerFrequency',4)" placeholder="Frequency" title="Search by Frequency">
            <!-- <button onclick="sortTableByColumn('powerTable','4')">Sort</button> -->
          </th>
          <th>
            <input type="text" id="searchPowerTier" onkeyup="searchPowerTable('searchPowerTier',5)" placeholder="Tier" title="Search by Tier">
            <!-- <button onclick="sortTableByColumn('powerTable','5')">Sort</button> -->
          </th>
          <th>
            <input type="text" id="searchPowerTags" onkeyup="searchPowerTable('searchPowerTags',6)" placeholder="Tags" title="Search by Tags">
            <!-- <button onclick="sortTableByColumn('powerTable','6')">Sort</button> -->
          </th>
        </tr>
      </table>
    </div>

    <!-- Ancestries (Cruxes) -->
    <div id="Cruxes" class="tabcontent">
      <p>Cruxes and Heritages are the Core option for Ancestries. For games where Species matters more than upbringing, use Ancestries (Species) instead.</p>
      <p>
        You are human, or otherwise defined more by upbringing than genetics:<br/>
        <strong>Size:</strong> Your size is Medium.<br/>
        <strong>Ability Scores:</strong> +2 to two ability scores of your choice.<br/>
        <strong>Speed:</strong> Your base walking speed is 6 squares.<br/>
        <strong>Languages:</strong> You can speak, read, and write Common and one extra language of your choice.<br/>
      </p>
      <p>In addition to the above statistics, pick a <strong>Crux</strong> (below) and a Heritage</p>
      
      <table id="cruxTable" class="filterTable">
        <tr class="header">
          <th>
            <input type="text" id="searchCruxName" onkeyup="searchCruxTable('searchCruxName',0)" placeholder="Name" title="Search by Crux Name">
            <button onclick="sortTableByColumn('cruxTable','0')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchCruxSkill" onkeyup="searchCruxTable('searchCruxSkill',1)" placeholder="Skill" title="Search by Skill">
            <button onclick="sortTableByColumn('cruxTable','1')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchCruxFeat1" onkeyup="searchCruxTable('searchCruxFeat1',2)" placeholder="Feature 1 Name" title="Search by Feature 1">
            <button onclick="sortTableByColumn('cruxTable','2')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchCruxFeat2" onkeyup="searchCruxTable('searchCruxFeat2',3)" placeholder="Feature 2 Name" title="Search by Feature 2">
            <button onclick="sortTableByColumn('cruxTable','3')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchCruxPower" onkeyup="searchCruxTable('searchCruxPower',4)" placeholder="Power" title="Search by Power">
            <button onclick="sortTableByColumn('cruxTable','4')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- Ancestries (Heritages) -->
    <div id="Heritages" class="tabcontent">
      <p>Cruxes and Heritages are the Core option for Ancestries. For games where Species matters more than upbringing, use Ancestries (Species) instead.</p>
      <p>
        You are human, or otherwise defined more by upbringing than genetics:<br/>
        <strong>Size:</strong> Your size is Medium.<br/>
        <strong>Ability Scores:</strong> +2 to two ability scores of your choice.<br/>
        <strong>Speed:</strong> Your base walking speed is 6 squares.<br/>
        <strong>Languages:</strong> You can speak, read, and write Common and one extra language of your choice.<br/>
      </p>
      <p>In addition to the above statistics, pick a Crux and a <strong>Heritage</strong> (below)</p>
      
      <table id="heritageTable" class="filterTable">
        <tr class="header">
          <th>
            <input type="text" id="searchHeritageName" onkeyup="searchHeritageTable('searchHeritageName',0)" placeholder="Name" title="Search by Heritage Name">
            <button onclick="sortTableByColumn('HeritageTable','0')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchHeritageSkill" onkeyup="searchHeritageTable('searchHeritageSkill',1)" placeholder="Skill Bonus" title="Search by Skill">
            <button onclick="sortTableByColumn('HeritageTable','1')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchHeritageFeatName" onkeyup="searchHeritageTable('searchHeritageFeatName',2)" placeholder="Feature Name" title="Search by Feature Name">
            <button onclick="sortTableByColumn('HeritageTable','2')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchHeritageFeatDesc" onkeyup="searchHeritageTable('searchHeritageFeatDesc',3)" placeholder="Feature Description" title="Search by Feature Description">
            <button onclick="sortTableByColumn('HeritageTable','3')">Sort</button>
          </th>
        </tr>
      </table>
    </div>

    <!-- Advanced Ancestries Option: Species -->
    <div id="Species" class="tabcontent">
      <p>* If using this Advanced Option, you pick a Species as your Ancestory instead of your normal Crux and Heritage.</p>
      
      <table id="speciesTable" class="filterTable">
        <!-- searchable headers, note that you can't currently filter by multiple inputs, only the last search applies -->
        <tr class="header">
          <th>
            <input type="text" id="searchSpeciesName" onkeyup="searchSpeciesTable('searchSpeciesName',0)" placeholder="Name" title="Search by Species Name">
            <button onclick="sortTableByColumn('speciesTable','0')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchSpeciesDescription" onkeyup="searchSpeciesTable('searchSpeciesDescription',1)" placeholder="Description" title="Search by Description/Orgin">
            <button onclick="sortTableByColumn('speciesTable','1')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchSpeciesAbility1" onkeyup="searchSpeciesTable('searchSpeciesAbility1',2)" placeholder="Ability 1" title="Search by Ability 1">
            <button onclick="sortTableByColumn('speciesTable','2')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchSpeciesAbility2" onkeyup="searchSpeciesTable('searchSpeciesAbility2',3)" placeholder="Ability 2" title="Search by Ability 2">
            <button onclick="sortTableByColumn('speciesTable','3')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchSpeciesSpeed" onkeyup="searchSpeciesTable('searchSpeciesSpeed',4)" placeholder="Speed" title="Search by Speed">
            <button onclick="sortTableByColumn('speciesTable','4')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchSpeciesDarkvision" onkeyup="searchSpeciesTable('searchSpeciesDarkvision',5)" placeholder="Darkvision" title="Search by Darkvision">
            <button onclick="sortTableByColumn('speciesTable','5')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- TODO: Kits -->
    <div id="Kits" class="tabcontent">
      <p>Kits can be taken as further customisation option by giving up your Tier 1 feats (levels 1, 2, 4, 6, 8 and 10).</p>
      <p>"Dabbles in [X]" kits are a way to multiclass, while "Worships the [X]" represent divine domains and others represent additional options like familiars, shapeshifting, animal companions, poisons, etc.</p>
      <p>Some classes may grant access to kits automatically (such as Priests choosing a "Worships the [X]" style kit. These kits do not require the sacrifice of your feats.</p>
      <p>TODO</p>
    </div>
    
    <!-- Advanced Option: Arts - Incantations and Practices -->
    <div id="Arts" class="tabcontent">
      <p>* In a game with the Arts Advanced Option, you have access to non-combat arts in the form of magical <i>Incantations</i> and non-magical <i>Practices</i>.</p>
      <p>If running with the Gated Arts variant, you'll need either the <i>Incantation Caster</i> or <i>Practical Arts</i> feat to learn the relevant category of Arts.</p>
      
      <table id="artTable" class="filterTable">
        <!-- searchable headers, note that you can't currently filter by multiple inputs, only the last search applies -->
        <tr class="header">
          <th>
            <input type="text" id="searchArtName" onkeyup="searchArtTable('searchArtName',0)" placeholder="Name" title="Search by Art Name">
            <button onclick="sortTableByColumn('artTable','0')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtLevel" onkeyup="searchArtTable('searchArtLevel',1)" placeholder="Level" title="Search by Level">
            <button onclick="sortTableByColumn('artTable','1')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtType" onkeyup="searchArtTable('searchArtType',2)" placeholder="Type" title="Search by Type">
            <button onclick="sortTableByColumn('artTable','2')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtCategory" onkeyup="searchArtTable('searchArtCategory',3)" placeholder="Category" title="Search by Category">
            <button onclick="sortTableByColumn('artTable','3')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtSkill" onkeyup="searchArtTable('searchArtSkill',4)" placeholder="Skill" title="Search by Skill">
            <button onclick="sortTableByColumn('artTable','4')">Sort</button>
          </th>
          <th>
            <input type="text" id="searchArtTime" onkeyup="searchArtTable('searchArtTime',5)" placeholder="Completion Time" title="Search by Skill">
            <button onclick="sortTableByColumn('artTable','5')">Sort</button>
          </th>
        </tr>
      </table>
    </div>
    
    <!-- Modal popup for displaying more info on classes, powers, etc -->
    <div id="modalShowInfo" class="modal">
      <div class="modal-content markdown-body">
        <span class="close" onclick="hideModal()">&times;</span>
        <div id="showInfoContent" class="markdown-body"></div>
      </div>
    </div>
    
    <script src="js/misc.js"></script>
    <script src="js/classes.js"></script>
    <script src="js/powers.js"></script>
    <script src="js/cruxes.js"></script>
    <script src="js/heritages.js"></script>
    <script src="js/ancestries.js"></script>
    <script src="js/arts.js"></script>

    <br/><br/>
    <footer>
      <p><i>Version 0.02 (2023-03-12) - early alpha, aiming for compatibility with Orcus Heroes' Handbook v1.0</i></p>
      <br/><br/>
      <p>
        <strong>Known Issues </strong>
        <br/>
        - searching by multiple columns works everywhere except Powers IIRC?
        <br/>
        - no option to filter by non-core options (with exception of Species we ignore non-core classes and powers currently)
        <br/>
        - sorting can only toggle between alphabetical ascending and descending, it cannot revert to initial ordering (or sort numerically, resulting in things like levels going 1, 10, 13, 15, 17, 2, 20, 3, 4, etc)
        <br/>
        - power display is barebones, no special formatting / colours, doesn't even conditionally show Hit/Defense/Effect/Miss lines depending on if the power actually has them, just displays all at once
        <br/>
        - sorting is disabled on powers tab to avoid horrible performance hit
        <br/>
        - nearly non-existent error handling
        <br/>
        - formatting is awful (footer doesn't go to bottom of page properly, columns can become squished, species darkvision should display Yes/No, not empty/1)
        <br/>
        - pretty much everything is still very messy despite some
        refactoring before committing to repo (I don't really write html, js or css; this is all being made up as I go)
        <br/>
        - cannot run locally like 4e Offline Compendium due to browser security protections avoiding the loading of json files from local filesystem
        <br/>
        - kits, animal companions, etc not started yet
        <br/>
        - currently depends on user grabbing the xslx from the Orcus github, saving as csv, then converting that csv to json via the csv_to_json.py script to update data.
        <br/>
        - currently the html pages for the class summaries are not yet automated and involves grabbing the "Class and Powers" markdown from the Orcus project, copying just the Class portion, converting to html, applying the github markdown css and loading that html file in the background. needs automation or some way of parsing the markdown?
        <br/>
        - no way to easily jump from disciplines listed on class tab to searching for just that discipline on power (the Class Disciplines should act as a link that autofills a search)
        <br/>
        - table header search fields lack a quick clear option
        <br/>
        - many more...but it's a start?
      </p>
    </footer>
  </body>
</html>